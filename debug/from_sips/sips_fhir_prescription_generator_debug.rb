require "base64"
require './lib/from_sips/sips_fhir_dispensing_generator'

filename = File.join(File.dirname(__FILE__), "example_sjis.csv")
params = {
    encoding: "Shift_JIS",
    nsips: Base64.encode64(File.read(filename, encoding: "shift_jis")),
}
generator = SipsFhirDispensingGenerator.new(params).perform
result = generator.get_resources.to_json
puts result
__END__

shift_jis
VkVSMDEwNDAxLDIwMjAxMDAxMjM1OTU5LCxQQzAxLDEzLDQsMTIzNDU2NyyD\ngYNog4yBW5byi8csMTA2NjIyMiyTjIuek3ONYIvmmFqWe5bYglI/glE/glAg\nj1qXRpVzk66OWZhalnuW2INPg4mDk4Nog16Dj4FbglGCUYJlLDAzMTIzNDU2\nNywKMSwxMjM0NTY3OCy23bzerCCywduzLIqzjtKBQIjqmFksMSwxOTc5MTEw\nMSwxNjA4Mzg5LJOMi56Tc5Cik2OSSovmglA/glGCUj+CU4JUP4JVglaCVyww\nMzMzNTMxMTcwLDAzMzM1MzExOTMsMDkwMTIzNDU2NzgseW9zaGlub3JpLmtv\nZGFtYUBtZWRsZXkuanAsMCwxLDA2MDUwMTE2LDE5OTkwMTAxLIJYglGCT4JT\nglQsglCCTywxLDMwLDcwLDAsLCwsMTUxMzgwOTIsOTYwMzI4MywxOTk5MDEw\nMSwsLCwsLCwsLCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsNDEyMgoyLDIwMjAx\nMDAxMTIzNDUsMSxBLDIwMjAxMDAxLDIwMjAxMDA0LDIwMjAxMDAxLDIwMjAx\nMDAxLDAsMCwwLGhvZ2UsOTk5OTk5OSwxMyyDgYNog4yBW4NOg4qDaoNig04s\nMTA2NjIyMiyTjIuek3ONYIvmmFqWe5bYglI/glE/glAgj1qXRpVzk66OWZha\nlnuW2INPg4mDk4Nog16Dj4FbglGCUYJlLDAzMTIzNDU2NywwMSyT4InILCws\nMDAwMSyyvCDA27MsiOOOdIFAkb6YWSw5OTk5LJbyjdyOdIFAjp+YWSwsLCws\nLJbpitSLeJP6k5mJwY5aICgwMIFGMDApLCwwLDAsMCwwLDAsMCwwLDAKMywx\nLDEwMTMwNDQ0MDAwMDAwMDAsk+CVnoFFjG+M+4FFglCT+oJSifGSqZKLl1uQ\nSIzjLCwsLCwyLDEsMywzLDIwMjAxMDAxLDIsMCwwLCwsLCwsCjQsMSwxLDEs\nMjIzMzAwMkYxMTc0LDYxMDQ1MzExOSwxMDM4MzU0MDEsLIOAg1KDX4NDg5OP\n+YJRglSCT4KNgocsTC2DSoOLg3uDVoNYg2WDQ4OTLDAsMCwwLDAsMCwwLDMs\nMSyP+SwwLDAsMCwwLDEsOC41LCwsLDIyMzMwMDJGMVpaWiwsLIF5lMqBeoNK\ng4uDe4NWg1iDZYNDg5OP+YJRglSCT4KNgocsMCwzLI/5LDEsLCwsLDEKNCwy\nLDEsMSw2MTMyMDEyRjEwMjUsNjE2MTMwNDc2LDExMDYyNjkwMSwsg3CDk4NY\ng3yDioOTgnOP+YJQgk+CTyCCUIJPgk+CjYKHLINag3SDSINgg0GDgIN3g0yD\nWoNgg4uJlo5fiZYsMCwwLDAsMCwwLDAsNiwxLI/5LDAsMCwwLDAsMSw0MC41\nLCwsLCwsLCwwLCwsMiwsLCwsCjMsMSwxMDEyMDQwNDAwMDAwMDAwLJPglZ6B\nRYxvjPuBRYJQk/qCUYnxkqmXW5BIjOMsLCwsLDIsMSwxNCwyLDIwMjAxMDAx\nLDEsMCwwLCwsLCwsCjQsMSwxLDEsMTEzMjAwMkIxMDYwLDYxMDQyMTAwNiwx\nMDA2MDcwMDIsLINBg4yDcoNBg2CDk45VglCCT4GTLIN0g0aDaoNng0ODkyww\nLDAsMCwwLDAsMCwxMDAsMSyChywwLDAsMCwwLDEsMTIuMSwsLCwsLCwsMCws\nLDUwLCwsLCwKNSw1NjgsOTAsNTUsMCw2MTEuOCwwLDc5LDgyLDE3LDI4LDEw\nLDg3NCwyNjIwLDEwMCwwLDIwMCwyNzIwLDI5MjAsOTIwLDIwMDAKNiwxLDgw\nLDQsMywxOTIsMiwxOTQsLCwsLCwsLCwsLCwsLCwsLCwsLEEKNiwyLDgwLDQs\nMTQsMTkyLDIsMTk0LCwsLCwsLCwsLCwsLCwsLCwsLCxBCjcsMSwxMjM0NTY3\nODksicGOWoJgLDEsOTkK\n